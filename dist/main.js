(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(){const e=localStorage.getItem("folders");if(e)return JSON.parse(e);n()}function n(e=o){localStorage.clear(),localStorage.setItem("folders",JSON.stringify(e))}e.d({},{R:()=>A,b:()=>O});const o=[{name:"All",tasks:[]},{name:"Personal",tasks:[["Study hard!","2023-06-01",null],["Wash Car","2023-05-26","Medium"],["Defeat Evil",null,"High"]]},{name:"Work",tasks:[["Work hard!",null,"Low"],["Don't get fired","2065-01-01","High"],["Placate boss",null,null]]}];let a=[];const c=document.querySelector(".modal"),r=document.querySelector(".edit-row-modal"),i=document.getElementById("close-edit-modal"),s=document.getElementById("main-table");function d(e){const t=A();t.innerHTML+=`\n      <div class="selector-container">\n        <img src="./img/folder.svg">\n        <h3 class="selector">${e.name}</h3>\n      </div>\n    `,t.addEventListener("click",v)}function l(e){const t=O();e.tasks.forEach((n=>{const o=document.createElement("div");o.className=`task-row ${n[2]}`,o.setAttribute("id",e.name),o.innerHTML=`\n        <input type="checkbox" class="checkbox">\n        <div class="task-container">\n            <span class="task-name">${n[0]}</span>\n            <span class="task-date">${null!==n[1]?n[1]:""}</span>\n        </div>\n        <div class="edit-del-container">\n            <img class="edit-button" src="./img/edit.svg">\n            <img class="delete-button" src="./img/delete.svg">\n        </div>\n        `,t.appendChild(o)}))}function u(){s.addEventListener("click",(e=>{let t=e.target,n=t.parentElement,o=n.previousSibling;t.matches("input.checkbox")?(e.stopImmediatePropagation(),n.classList.toggle("fade")):t.matches(".edit-button")?(e.stopImmediatePropagation(),function(e){const t=document.querySelector(".submit-edit-button"),n=document.querySelector("#edit-text"),o=document.querySelector("#edit-date"),{previousSibling:c}=e;n.value=c.children[0].textContent,o.value=c.children[1].textContent;(function(e,t){const n=document.querySelector("#edit-high-button"),o=document.querySelector("#edit-medium-button"),a=document.querySelector("#edit-low-button");"High"===e?n.classList.add("prio-btn-select"):"Medium"===e||"Med"===e?o.classList.add("prio-btn-select"):"Low"===e&&a.classList.add("prio-btn-select"),n.addEventListener("click",(function(e){e.stopImmediatePropagation(),p(n)})),o.addEventListener("click",(function(e){e.stopImmediatePropagation(),p(o)})),a.addEventListener("click",(function(e){e.stopImmediatePropagation(),p(a)}))})(e.parentElement.classList[1]),r.showModal();const i=()=>{var e,s,d,l;e=c.children[0].textContent,s=n.value,d=o.value,l=h(),a.forEach((t=>{t.tasks.forEach((t=>{if(t.includes(e))return t[0]=s,t[1]=d,void(t[2]=l)}))})),g(),f(),r.close(),t.removeEventListener("click",i)};t.addEventListener("click",i,{once:!0})}(o)):t.matches(".delete-button")?(e.stopImmediatePropagation(),function(e){const t=e.previousSibling.children[0].textContent;a.forEach((e=>{e.tasks.forEach((n=>{if(n.includes(t)){let t=e.tasks.indexOf(n);e.tasks.splice(t,1)}}))})),g()}(o)):t.matches(".priority-button")&&(e.stopImmediatePropagation(),p(t))}))}function m(e){let t=e.target,n=document.getElementById("modal-text"),o=document.getElementById("modal-date"),r=h();t.matches(".submit-button")?(e.stopImmediatePropagation(),function(e,t,n){const o=[`${e}`,`${t}`,`${n}`],c=document.querySelector(".selected");console.log(c),a.forEach((e=>{e.name==c.innerText&&e.tasks.push(o)})),g()}(n.value,o.value,r),c.close()):t.matches(".priority-button")&&(e.stopImmediatePropagation(),p(t))}function p(e){f(),e.classList.add("prio-btn-select")}function h(){let e=document.querySelector(".prio-btn-select");return e?e.textContent:"null"}function f(){const e=document.querySelectorAll(".prio-btn-select");e&&e.forEach((e=>{e.classList.remove("prio-btn-select")}))}function g(){n(a),O().innerHTML="",a=t(),a.forEach((e=>{l(e),u()}))}const v=e=>{document.querySelectorAll(".selected").forEach((e=>{e.classList.remove("selected")})),e.target.classList.add("selected"),E(e)},E=e=>{let t=e.target.innerText;document.querySelectorAll(".task-row").forEach((e=>{e.id==t||"All"==t?e.classList.remove("hide"):e.classList.add("hide")}))},y=e=>{document.querySelectorAll(".selected-date").forEach((e=>{e.classList.remove("selected-date")})),e.target.classList.add("selected-date"),b(e)},b=e=>{const t=document.querySelectorAll(".task-date"),n=e.target.innerText,o=new Date,a=(c=o).getFullYear()+"-"+(c.getMonth()+1).toString().padStart(2,"0")+"-"+c.getDate().toString().padStart(2,"0");var c;"This Week"==n&&t.forEach((e=>{!function(e,t){Date.prototype.GetFirstDayOfWeek=function(){return new Date(this.setDate(this.getDate()-this.getDay()+(0==this.getDay()?-6:1)))},Date.prototype.GetLastDayOfWeek=function(){return new Date(this.setDate(this.getDate()-this.getDay()+7))};const n=t.GetFirstDayOfWeek(),o=t.GetLastDayOfWeek();return e>=n&&e<=o}(new Date(e.textContent),o)?e.parentElement.parentElement.classList.add("hide-date"):e.parentElement.parentElement.classList.remove("hide-date")})),"Inbox"==n&&t.forEach((e=>{e.parentElement.parentElement.classList.remove("hide-date")})),"Today"==n&&t.forEach((e=>{e.innerText==a?e.parentElement.parentElement.classList.remove("hide-date"):e.parentElement.parentElement.classList.add("hide-date")}))},k=document.querySelector(".add-folder-container"),S=document.querySelector(".input-container"),L=document.querySelector(".button-cancel"),q=document.querySelector(".add-task-button"),D=document.querySelector(".close-modal-main"),x=document.querySelector(".modal"),I=document.querySelector(".folders-container"),w=document.querySelector(".task-table");function A(){return I}function O(){return w}var P;k.addEventListener("click",(function(){k.setAttribute("id","hide"),S.removeAttribute("id","hide")})),L.addEventListener("click",(function(){k.removeAttribute("id","hide"),S.setAttribute("id","hide")})),q.addEventListener("click",(function(){x.showModal()})),D.addEventListener("click",(function(){x.close()})),P=function(){if(function(e){let t;try{t=window.localStorage;const e="__storage_test__";return t.setItem(e,e),t.removeItem(e),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}())return t();console.log("storage not available")}(),a=P,P.forEach((e=>{d(e),A().children[0].classList.add("selected"),l(e),u(),function(){document.addEventListener("keydown",(e=>{"Escape"===e.key&&(f(),r.close())})),i.addEventListener("click",(()=>{f(),r.close()})),document.querySelector(".dates-container").addEventListener("click",y);const e=document.querySelector(".button-add"),t=document.querySelector("#folder-name-input");e.addEventListener("click",(e=>{e.stopImmediatePropagation(),function(e){const t=document.querySelector(".input-container"),o=document.querySelector(".add-folder-container"),c={name:`${e}`,tasks:[]};a.push(c),n(a),t.setAttribute("id","hide"),o.removeAttribute("id","hide"),d(c)}(t.value)})),c.addEventListener("click",m)}()}))})();